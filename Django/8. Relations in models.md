# Many-to-one relationships[¶](https://docs.djangoproject.com/en/5.2/topics/db/examples/many_to_one/#many-to-one-relationships "Link to this heading")

To define a many-to-one relationship, use [`ForeignKey`](https://docs.djangoproject.com/en/5.2/ref/models/fields/#django.db.models.ForeignKey "django.db.models.ForeignKey").

In this example, a `Reporter` can be associated with many `Article` objects, but an `Article` can only have one `Reporter` object:
```Python
from django.db import models

class Reporter(models.Model):
    first_name = models.CharField(max_length=30)
    last_name = models.CharField(max_length=30)
    email = models.EmailField()

    def __str__(self):
        return f"{self.first_name} {self.last_name}"

class Article(models.Model):
    headline = models.CharField(max_length=100)
    pub_date = models.DateField()
    reporter = models.ForeignKey(Reporter, on_delete=models.CASCADE)

    def __str__(self):
        return self.headline

    class Meta:
        ordering = ["headline"]
```

What follows are examples of operations that can be performed using the Python API facilities.

Create a few Reporters:
```Terminal
>>> r = Reporter(first_name="John", last_name="Smith", email="john@example.com")
>>> r.save()

>>> r2 = Reporter(first_name="Paul", last_name="Jones", email="paul@example.com")
>>> r2.save()
```

Create an Article:
```Terminal
>>> from datetime import date
>>> a = Article(id=None, headline="This is a test", pub_date=date(2005, 7, 27), reporter=r)
>>> a.save()

>>> a.reporter.id
1

>>> a.reporter
<Reporter: John Smith>
```


At my code you can see `ForeignKey` here:
> [!NOTE] Path: `blog/models.py`
```Python
from django.db import models
# Create your models here.

class Article(models.Model):
    title = models.CharField(max_length=110)
    image = models.ImageField(blank=True, null=True, upload_to='blog_images', height_field=None, width_field=None, max_length=None)
    text = models.TextField(help_text='Enter your text')
    is_show = models.BooleanField(default=False)
    created_date = models.DateTimeField(auto_now_add=True)
    update_date = models.DateTimeField(auto_now=True)
    author = models.ForeignKey(User, on_delete=models.DO_NOTHING)

```


# Many-to-many relationships[¶](https://docs.djangoproject.com/en/5.2/topics/db/examples/many_to_many/#many-to-many-relationships "Link to this heading")

To define a many-to-many relationship, use [`ManyToManyField`](https://docs.djangoproject.com/en/5.2/ref/models/fields/#django.db.models.ManyToManyField "django.db.models.ManyToManyField").

In this example, an `Article` can be published in multiple `Publication` objects, and a `Publication` has multiple `Article` objects:
```Python
from django.db import models

class Publication(models.Model):
    title = models.CharField(max_length=30)

    class Meta:
        ordering = ["title"]

    def __str__(self):
        return self.title

class Article(models.Model):
    headline = models.CharField(max_length=100)
    publications = models.ManyToManyField(Publication)

    class Meta:
        ordering = ["headline"]

    def __str__(self):
        return self.headline
```
What follows are examples of operations that can be performed using the Python API facilities.

Create a few `Publication` instances:
```Terminal
>>> p1 = Publication(title="The Python Journal")
>>> p1.save()
>>> p2 = Publication(title="Science News")
>>> p2.save()
>>> p3 = Publication(title="Science Weekly")
>>> p3.save()
```

Create an `Article`:
```Terminal
>>> a1 = Article(headline="Django lets you build web apps easily")
```

You can’t associate it with a `Publication` until it’s been saved:
```Terminal
>>> a1.publications.add(p1)
Traceback (most recent call last):
...
ValueError: "<Article: Django lets you build web apps easily>" needs to have a value for field "id" before this many-to-many relationship can be used.
```

Save it!
```
>>> a1.save()
```

Associate the `Article` with a `Publication`:
```
>>> a1.publications.add(p1)
```


At my code you can see `ManyToManyField` here:
> [!NOTE] Path: `blog/models.py`
```Python
from django.db import models
from django.contrib.auth.models import User
# Create your models here.


class Article(models.Model):
    title = models.CharField(max_length=110)
    image = models.ImageField(blank=True, null=True, upload_to='blog_images', height_field=None, width_field=None, max_length=None)
    text = models.TextField(help_text='Enter your text')
    is_show = models.BooleanField(default=False)
    created_date = models.DateTimeField(auto_now_add=True)
    update_date = models.DateTimeField(auto_now=True)
    author = models.ForeignKey(User, on_delete=models.DO_NOTHING)
    categories = models.ManyToManyField('Category')


class Category(models.Model):
    title = models.CharField(max_length=50)

    def __str__(self):
        return self.title

```

> [!HINT] Register models
> To view models in the admin panel, you must register them in the admin panel.
